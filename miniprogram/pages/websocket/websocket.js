"use strict";
Page({
    data: {
        sendUrl: "ws://123.207.136.134:9010/ajaxchattest",
        message: "",
        responseMsg: "",
        responseString: [
            {
                type: "node",
                name: "h2",
                attrs: {},
                children: [
                    {
                        type: "text",
                        text: "this is response content",
                    },
                ],
            },
        ],
    },
    recodeMessage: function (e) {
        this.setData({ message: e.detail.value });
    },
    send: function () {
        var _this = this;
        var socketTask = wx.connectSocket({
            url: this.data.sendUrl,
        });
        wx.onSocketOpen(function (res) {
            console.log("socket open", res);
            wx.sendSocketMessage({
                data: _this.data.message,
                success: function (res) {
                    console.log("success", res);
                    wx.onSocketClose(function (res) {
                        console.log(res);
                    });
                },
                complete: function (res) { },
            });
        });
        wx.onSocketMessage(function (res) {
            console.log(res);
            _this.setData({ responseMsg: res.data });
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vic29ja2V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2Vic29ja2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixPQUFPLEVBQUUsd0NBQXdDO1FBQ2pELE9BQU8sRUFBRSxFQUFFO1FBQ1gsV0FBVyxFQUFFLEVBQTBCO1FBQ3ZDLGNBQWMsRUFBRTtZQUNkO2dCQUNFLElBQUksRUFBRSxNQUFNO2dCQUNaLElBQUksRUFBRSxJQUFJO2dCQUNWLEtBQUssRUFBRSxFQUFFO2dCQUNULFFBQVEsRUFBRTtvQkFDUjt3QkFDRSxJQUFJLEVBQUUsTUFBTTt3QkFDWixJQUFJLEVBQUUsMEJBQTBCO3FCQUNqQztpQkFDRjthQUNGO1NBQ0Y7S0FDRjtJQUtELGFBQWEsWUFBQyxDQUFNO1FBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFJRCxJQUFJO1FBQUosaUJBdUJDO1FBckJDLElBQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUM7WUFDbEMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTztTQUN2QixDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQUMsR0FBRztZQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNoQyxFQUFFLENBQUMsaUJBQWlCLENBQUM7Z0JBQ25CLElBQUksRUFBRSxLQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87Z0JBQ3ZCLE9BQU8sRUFBRSxVQUFDLEdBQUc7b0JBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7b0JBQzVCLEVBQUUsQ0FBQyxhQUFhLENBQUMsVUFBQyxHQUFHO3dCQUNuQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNuQixDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDO2dCQUNELFFBQVEsRUFBRSxVQUFDLEdBQUcsSUFBTSxDQUFDO2FBQ3RCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLGVBQWUsQ0FBQyxVQUFDLEdBQUc7WUFDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNqQixLQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsV0FBVyxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgc2VuZFVybDogXCJ3czovLzEyMy4yMDcuMTM2LjEzNDo5MDEwL2FqYXhjaGF0dGVzdFwiLFxuICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgcmVzcG9uc2VNc2c6IFwiXCIgYXMgc3RyaW5nIHwgQXJyYXlCdWZmZXIsXG4gICAgcmVzcG9uc2VTdHJpbmc6IFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogXCJub2RlXCIsXG4gICAgICAgIG5hbWU6IFwiaDJcIixcbiAgICAgICAgYXR0cnM6IHt9LFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgdGV4dDogXCJ0aGlzIGlzIHJlc3BvbnNlIGNvbnRlbnRcIixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICAvKipcbiAgICog5pWw5o2u6I635Y+W5pON5L2cXG4gICAqIEBwYXJhbSBlXG4gICAqL1xuICByZWNvZGVNZXNzYWdlKGU6IGFueSkge1xuICAgIHRoaXMuc2V0RGF0YSh7IG1lc3NhZ2U6IGUuZGV0YWlsLnZhbHVlIH0pO1xuICB9LFxuICAvKipcbiAgICog5Y+R6YCB5pWw5o2uXG4gICAqL1xuICBzZW5kKCkge1xuICAgIC8vICAgMS4g5bu656uL6ZO+5o6lXG4gICAgY29uc3Qgc29ja2V0VGFzayA9IHd4LmNvbm5lY3RTb2NrZXQoe1xuICAgICAgdXJsOiB0aGlzLmRhdGEuc2VuZFVybCxcbiAgICB9KTtcbiAgICAvLyDpk77mjqXmiJDlip/kuI7lkKbnmoTliKTmlq1cbiAgICB3eC5vblNvY2tldE9wZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJzb2NrZXQgb3BlblwiLCByZXMpO1xuICAgICAgd3guc2VuZFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICBkYXRhOiB0aGlzLmRhdGEubWVzc2FnZSxcbiAgICAgICAgc3VjY2VzczogKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCByZXMpO1xuICAgICAgICAgIHd4Lm9uU29ja2V0Q2xvc2UoKHJlcykgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IChyZXMpID0+IHt9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgd3gub25Tb2NrZXRNZXNzYWdlKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICB0aGlzLnNldERhdGEoeyByZXNwb25zZU1zZzogcmVzLmRhdGEgfSk7XG4gICAgfSk7XG4gIH0sXG59KTtcblxuLy8g5oiR5Y+R6YCB5LiA5Liq5raI5oGv77yM54S25ZCO5riy5p+T5L+h5oGv77yM5LmL5YmN55qE5riy5p+T55qE6ZyA6KaB5L+d55WZ77yM5oiR5Lus5bCx6ZyA6KaB5LiA5Liq5Lic6KW/5p2l5L+d5a2Y77yM6L+b6KGM5riy5p+T44CC5bm25LiU5ZKM5py65Zmo5Lq65Zue5aSN55qE5piv5LiA5LiA5a+55bqU55qEXG4vLyDmnLrlmajkurrlm57lpI3kuIDkuKrmtojmga/vvIzmuLLmn5Pkv6Hmga9cbiJdfQ==