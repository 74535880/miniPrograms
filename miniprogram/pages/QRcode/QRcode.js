"use strict";
var app = getApp();
var scantype = {
    QR_CODE: "二维码",
    AZTEC: "一维码",
    CODABAR: "一维码",
    CODE_39: "一维码",
    CODE_93: "一维码",
    CODE_128: "一维码",
    DATA_MATRIX: "二维码",
    EAN_8: "一维码",
    EAN_13: "一维码",
    ITF: "一维码",
    MAXICODE: "一维码",
    PDF_417: "二维码",
    RSS_14: "一维码",
    RSS_EXPANDED: "一维码",
    UPC_A: "一维码",
    UPC_E: "一维码",
    UPC_EAN_EXTENSION: "一维码",
    WX_CODE: "二维码",
    CODE_25: "一维码",
};
Page({
    data: {
        scanResult: {
            isShow: false,
            type: "",
            text: "",
            msg: "",
        },
    },
    onscan: function () {
        var _this = this;
        wx.scanCode({
            success: function (res) {
                console.log(res);
                var msg = "";
                if (res.scanType == "WX_CODE" && res.result === "") {
                    msg = "我真是不知道怎么得到";
                }
                _this.setData({
                    scanResult: {
                        isShow: true,
                        type: scantype[res.scanType],
                        text: res.result,
                        msg: msg,
                    },
                });
                if (_this.data.scanResult.text !== "") {
                    wx.getStorage({
                        key: "scanLogs",
                        success: function (res) {
                            console.log(res);
                            var scanLogs = res.data || [];
                            _this.data.scanResult.date = Date.now();
                            scanLogs.unshift(_this.data.scanResult);
                            wx.setStorageSync("scanLogs", scanLogs);
                        },
                    });
                }
            },
            fail: function (res) { return console.log(res); },
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUVJjb2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUVJjb2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFNLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQztBQUNyQixJQUFNLFFBQVEsR0FBRztJQUNmLE9BQU8sRUFBRSxLQUFLO0lBQ2QsS0FBSyxFQUFFLEtBQUs7SUFDWixPQUFPLEVBQUUsS0FBSztJQUNkLE9BQU8sRUFBRSxLQUFLO0lBQ2QsT0FBTyxFQUFFLEtBQUs7SUFDZCxRQUFRLEVBQUUsS0FBSztJQUNmLFdBQVcsRUFBRSxLQUFLO0lBQ2xCLEtBQUssRUFBRSxLQUFLO0lBQ1osTUFBTSxFQUFFLEtBQUs7SUFDYixHQUFHLEVBQUUsS0FBSztJQUNWLFFBQVEsRUFBRSxLQUFLO0lBQ2YsT0FBTyxFQUFFLEtBQUs7SUFDZCxNQUFNLEVBQUUsS0FBSztJQUNiLFlBQVksRUFBRSxLQUFLO0lBQ25CLEtBQUssRUFBRSxLQUFLO0lBQ1osS0FBSyxFQUFFLEtBQUs7SUFDWixpQkFBaUIsRUFBRSxLQUFLO0lBQ3hCLE9BQU8sRUFBRSxLQUFLO0lBQ2QsT0FBTyxFQUFFLEtBQUs7Q0FDZixDQUFDO0FBU0YsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osVUFBVSxFQUFFO1lBQ1YsTUFBTSxFQUFFLEtBQUs7WUFDYixJQUFJLEVBQUUsRUFBRTtZQUNSLElBQUksRUFBRSxFQUFFO1lBQ1IsR0FBRyxFQUFFLEVBQUU7U0FDTztLQUNqQjtJQUlELE1BQU07UUFBTixpQkFnQ0M7UUEvQkMsRUFBRSxDQUFDLFFBQVEsQ0FBQztZQUNWLE9BQU8sRUFBRSxVQUFDLEdBQUc7Z0JBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDakIsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO2dCQUNiLElBQUksR0FBRyxDQUFDLFFBQVEsSUFBSSxTQUFTLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxFQUFFLEVBQUU7b0JBQ2xELEdBQUcsR0FBRyxZQUFZLENBQUM7aUJBQ3BCO2dCQUNELEtBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsVUFBVSxFQUFFO3dCQUNWLE1BQU0sRUFBRSxJQUFJO3dCQUNaLElBQUksRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQzt3QkFDNUIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNO3dCQUNoQixHQUFHLEtBQUE7cUJBQ0o7aUJBQ0YsQ0FBQyxDQUFDO2dCQUVILElBQUksS0FBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFBRTtvQkFDcEMsRUFBRSxDQUFDLFVBQVUsQ0FBQzt3QkFDWixHQUFHLEVBQUUsVUFBVTt3QkFDZixPQUFPLEVBQUUsVUFBQyxHQUFHOzRCQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7NEJBQ2pCLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDOzRCQUM5QixLQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDOzRCQUN2QyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7NEJBQ3ZDLEVBQUUsQ0FBQyxjQUFjLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO3dCQUMxQyxDQUFDO3FCQUNGLENBQUMsQ0FBQztpQkFDSjtZQUNILENBQUM7WUFDRCxJQUFJLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFoQixDQUFnQjtTQUNoQyxDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwID0gZ2V0QXBwKCk7XG5jb25zdCBzY2FudHlwZSA9IHtcbiAgUVJfQ09ERTogXCLkuoznu7TnoIFcIixcbiAgQVpURUM6IFwi5LiA57u056CBXCIsXG4gIENPREFCQVI6IFwi5LiA57u056CBXCIsXG4gIENPREVfMzk6IFwi5LiA57u056CBXCIsXG4gIENPREVfOTM6IFwi5LiA57u056CBXCIsXG4gIENPREVfMTI4OiBcIuS4gOe7tOeggVwiLFxuICBEQVRBX01BVFJJWDogXCLkuoznu7TnoIFcIixcbiAgRUFOXzg6IFwi5LiA57u056CBXCIsXG4gIEVBTl8xMzogXCLkuIDnu7TnoIFcIixcbiAgSVRGOiBcIuS4gOe7tOeggVwiLFxuICBNQVhJQ09ERTogXCLkuIDnu7TnoIFcIixcbiAgUERGXzQxNzogXCLkuoznu7TnoIFcIixcbiAgUlNTXzE0OiBcIuS4gOe7tOeggVwiLFxuICBSU1NfRVhQQU5ERUQ6IFwi5LiA57u056CBXCIsXG4gIFVQQ19BOiBcIuS4gOe7tOeggVwiLFxuICBVUENfRTogXCLkuIDnu7TnoIFcIixcbiAgVVBDX0VBTl9FWFRFTlNJT046IFwi5LiA57u056CBXCIsXG4gIFdYX0NPREU6IFwi5LqM57u056CBXCIsXG4gIENPREVfMjU6IFwi5LiA57u056CBXCIsXG59O1xuaW50ZXJmYWNlIElTY2FuUmVzdWx0IHtcbiAgaXNTaG93OiBib29sZWFuO1xuICB0eXBlOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgbXNnOiBzdHJpbmc7XG4gIGRhdGU/OiBudW1iZXI7XG59XG5cblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgc2NhblJlc3VsdDoge1xuICAgICAgaXNTaG93OiBmYWxzZSxcbiAgICAgIHR5cGU6IFwiXCIsXG4gICAgICB0ZXh0OiBcIlwiLFxuICAgICAgbXNnOiBcIlwiLFxuICAgIH0gYXMgSVNjYW5SZXN1bHQsXG4gIH0sXG4gIC8qKlxuICAgKiDmiavkuIDmiatcbiAgICovXG4gIG9uc2NhbigpIHtcbiAgICB3eC5zY2FuQ29kZSh7XG4gICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgIGxldCBtc2cgPSBcIlwiO1xuICAgICAgICBpZiAocmVzLnNjYW5UeXBlID09IFwiV1hfQ09ERVwiICYmIHJlcy5yZXN1bHQgPT09IFwiXCIpIHtcbiAgICAgICAgICBtc2cgPSBcIuaIkeecn+aYr+S4jeefpemBk+aAjuS5iOW+l+WIsFwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgc2NhblJlc3VsdDoge1xuICAgICAgICAgICAgaXNTaG93OiB0cnVlLFxuICAgICAgICAgICAgdHlwZTogc2NhbnR5cGVbcmVzLnNjYW5UeXBlXSxcbiAgICAgICAgICAgIHRleHQ6IHJlcy5yZXN1bHQsXG4gICAgICAgICAgICBtc2csXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIOWtmOWFpXN0b3JhZ2VcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5zY2FuUmVzdWx0LnRleHQgIT09IFwiXCIpIHtcbiAgICAgICAgICB3eC5nZXRTdG9yYWdlKHtcbiAgICAgICAgICAgIGtleTogXCJzY2FuTG9nc1wiLFxuICAgICAgICAgICAgc3VjY2VzczogKHJlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgICAgICBsZXQgc2NhbkxvZ3MgPSByZXMuZGF0YSB8fCBbXTtcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLnNjYW5SZXN1bHQuZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgIHNjYW5Mb2dzLnVuc2hpZnQodGhpcy5kYXRhLnNjYW5SZXN1bHQpO1xuICAgICAgICAgICAgICB3eC5zZXRTdG9yYWdlU3luYyhcInNjYW5Mb2dzXCIsIHNjYW5Mb2dzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWlsOiAocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpLFxuICAgIH0pO1xuICB9LFxufSk7XG4iXX0=